{{>adminHeader}}
{{#*inline "style"}}
<style>
    .menu-link[data-link="sales-data"] {
        background-color: #26ABE2;
        color: #fff !important;
    }

    .copy-upper-text-btn {
        position: absolute;
        top: 4px;
        right: 0;
        padding: 0.1em 0.3em;
    }

    .show {
        display: block;
        visibility: visible;
        opacity: 1;
    }

    .hide {
        display: none;
        visibility: hidden;
        opacity: 0;
    }

    .new-part td.position-relative button {
        visibility: hidden;
    }

    .new-part:hover td.position-relative button {
        visibility: visible;
    }
</style>
{{/inline}}
<script>
    $('.menu-link[ data-link="sales-data"] #sales-data-navbar-item').html("Sales (M)")
</script>
<div class="container px-md-4 ">
    <div class="row mt-md-4 mt-3">
        <div class="col-12">
            <h4 style="font-size:1.25em ;">Create new <span style="color:#26abe2 ;"> Machine</span> sale report - <span
                    class="report-number"></span> </h4>
        </div>
    </div>
    <form id="new-machine-sale-report-form">
        <input type="text" hidden class="report-number-input" name="reportNumber">
        <div class="row mt-md-3">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="invoiceDate">Invoice Date</label>
                    <input type="text" class="form-control shadow-none datepicker" autocapitalize="off" required
                        name="invoiceDate" placeholder="enter invoice date">
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="invoiceDate">Invoice Number</label>
                    <input type="text" class="form-control shadow-none" required name="invoiceNum"
                        aria-describedby="helpId" placeholder="enter invoice number">
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="invoiceDate">Customer Name</label>
                    <input type="text" class="form-control shadow-none" required name="customerName"
                        aria-describedby="helpId" placeholder="enter customer name">
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="invoiceDate">Address</label>
                    <input type="text" class="form-control shadow-none" required name="address"
                        aria-describedby="helpId" placeholder="enter address">
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="invoiceDate">Mobile Number</label>
                    <input type="text" class="form-control shadow-none" required name="mobileNum"
                        aria-describedby="helpId" placeholder="enter mobile number">
                </div>
            </div>
            {{!-- <div class="col-md-6">
                <div class="form-group">
                    <label for="invoiceDate">Barcode</label>
                    <input type="text" class="form-control shadow-none" required name="barCode"
                        aria-describedby="helpId" placeholder="enter bar code">
                </div>
            </div> --}}
            {{!-- <div class="col-md-6">
                <div class="form-group">
                    <label for="invoiceDate">Warranty</label>
                    <input type="text" class="form-control shadow-none" required name="warranty"
                        aria-describedby="helpId" placeholder="enter warranty">
                </div>
            </div> --}}
            <div class="col-md-12">
                <div class="service-report-all-machine-info-inputs">
                    <div class="table-responsive-xl">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">Machine_Name</th>
                                    <th scope="col">Serial_No.</th>
                                    <th scope="col" style="width: 6em;">Wty</th>
                                    <th scope="col" style="width: 10em;"></th>
                                    <th scope="col">From</th>
                                    <th scope="col">Till</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="row-1 position-relative">
                                    <td>
                                        <input autocomplete="off" type="text" class="form-control shadow-none mx-1"
                                            required name="machineName" aria-describedby="helpId"
                                            placeholder="machine name">
                                    </td>
                                    <td>
                                        <input autocomplete="off" type="text" class="form-control shadow-none mx-1"
                                            required name="machineNum" aria-describedby="helpId" placeholder="machine sno">
                                    </td>
                                    <td>
                                        <input autocomplete="off" type="number"
                                            class="form-control shadow-none mx-1 warranty-input" required
                                            name="warrantyPeriod" onkeyup="updateWarrantyDate(1)"
                                            aria-describedby="helpId" style="width:2.8em;" required placeholder="0">
                                    </td>
                                    <td>
                                        <select class="form-select warranty-select" style="width:7em ;"
                                            onchange="updateWarrantyDate(1)" name="warrantyType">
                                            <option value="years" selected>years</option>
                                            <option value="months">months</option>
                                            <option value="weeks">weeks</option>
                                            <option value="days">days</option>
                                        </select>
                                    </td>
                                    <td>
                                        <input autocomplete="off" type="text"
                                            class="form-control shadow-none mx-1 datepicker warranty-input" required
                                            name="warrantyFrom" onkeyup="updateWarrantyDate(1)"
                                            onchange="updateWarrantyDate(1)" aria-describedby="helpId"
                                            placeholder="warranty from" required>
                                    </td>
                                    <td>
                                        <input autocomplete="off" readonly type="text"
                                            class="form-control shadow-none mx-1 warranty-input" name="warrantyTo"
                                            onkeyup="updateWarrantyDate(1)" aria-describedby="helpId"
                                            placeholder="warranty till">
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <h6 class="text-end mr-2 text-secondary mb-5 pb-5"> <span class="d-lg-inline d-none">( Ctrl + Q )
                    </span><span class="cursor-pointer text-primary add-new-machine-service-report"> Add
                        new +</span></h6>
                <input type="text" hidden class="total-machines-added" name="totalMachinesAdded">
            </div>
            <div class=" d-flex justify-content-end" style="position:fixed;bottom:0.5em;right:0.5em">
                {{#each admin.permissions}}
                {{#ifeq this.permissionName "all"}}
                <a href="/vitco-impex/control/sales-report/machine/all" class="btn shadow-none bg-text-base-color">
                    View all machines
                </a>
                {{/ifeq}}
                {{#ifeq this.permissionName "machineSalesData"}}
                {{#each this.permissionKeys}}
                {{#ifeq this.keyName "view"}}
                <a href="/vitco-impex/control/sales-report/machine/all" class="btn shadow-none bg-text-base-color">
                    View all machines
                </a>
                {{/ifeq}}
                {{/each}}
                {{/ifeq}}
                {{/each}}
                <button class="btn btn-primary shadow-none ms-3 submit-machine-sale-report-btn"
                    type="submit">Submit</button>
            </div>
        </div>
    </form>
</div>

{{#*inline "body"}}
{{/inline}}
{{#*inline "css"}}
<link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.27.2/axios.min.js"
    integrity="sha512-odNmoc1XJy5x1TMVMdC7EMs3IVdItLPlCeL5vSUPN2llYKMJ2eByTTAIiiuqLg+GdNr9hF6z81p27DArRFKT7A=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>


{{/inline}}
<script>
    const webHost = `{{webHost}}`
    $('#search-form input').attr('placeholder', '')
    $('#search-form input').attr('style', 'background:#fff')
    $('#search-form input').attr('disabled', true)
    $('#invoiceDate').focus()
    setInterval(function () { updatesalesReportNumber() }, 100);
</script>
<script src="https://momentjs.com/downloads/moment.js"></script>
<script src="/js/admin/ajaxReq.js"></script>
<script src="/js/admin/sales-data/addNewsalesData.js"></script>